<html>
<head>
  <title>Telegram Mini App Dark Mode Fix</title>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body>
  <script>
    const tg = window.Telegram.WebApp;
    tg.ready();

    const user = tg.initDataUnsafe?.user;
        console.log('User info:', user);
        if (user) {
            document.body.insertAdjacentHTML(
              'beforeend',
              `<img src="${user.photo_url}" width=150px height = auto>`
            )
            document.body.insertAdjacentHTML(
                'beforeend',
                `<p>Welcome, ${user.first_name}! (id: ${user.id})</p>`
            );
        } else {
            document.body.insertAdjacentHTML(
                'beforeend',
                `<p>No Telegram user data found.</p>`
            );
        }

    function applyTheme() {
      const theme = tg.colorScheme;
      if (theme === "dark") {
        document.body.style.backgroundColor = "#1a1a1a";
        document.body.style.color = "#ffffff";
      } else {
        document.body.style.backgroundColor = "#ffffff";
        document.body.style.color = "#000000";
      }
    }
    document.body.style.text_align = "center";  
    applyTheme();
    tg.onEvent('themeChanged', applyTheme);
  </script>
</body>
</html>
