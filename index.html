<html>
<head>
  <title>Telegram Mini App Dark Mode Fix</title>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body>
  <h1>Hello, Telegram!</h1>
  <button>Click Me</button>

  <script>
    const tg = window.Telegram.WebApp;
    tg.ready();

    function applyTheme() {
      const theme = tg.colorScheme; // "light" or "dark"
      if (theme === "dark") {
        document.body.style.backgroundColor = "#1a1a1a";
        document.body.style.color = "#ffffff";
        document.querySelectorAll('button').forEach(btn => {
          btn.style.backgroundColor = "#333333";
          btn.style.color = "#ffffff";
        });
      } else {
        document.body.style.backgroundColor = "#ffffff";
        document.body.style.color = "#000000";
        document.querySelectorAll('button').forEach(btn => {
          btn.style.backgroundColor = "#3390ec";
          btn.style.color = "#ffffff";
        });
      }
    }

    // Apply theme immediately
    applyTheme();

    // Update theme when user switches in Telegram
    tg.onEvent('themeChanged', applyTheme);
  </script>
</body>
</html>
